<view class="page" data-weui-theme="{{theme}}">
  <view class="container">
    <view class="second-hand-section">
      <view class="section-title">â™»ï¸ äºŒæ‰‹é›†å¸‚</view>

      <!-- åŠ è½½çŠ¶æ€ -->
      <view wx:if="{{loading}}" class="loading-container">
        <text class="loading-text">åŠ è½½ä¸­...</text>
      </view>

      <!-- é”™è¯¯çŠ¶æ€ -->
      <view wx:elif="{{error}}" class="error-container">
        <text class="error-text">è·å–æ•°æ®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•</text>
        <button class="retry-btn" bindtap="retry">é‡è¯•</button>
      </view>

      <!-- å•†å“åˆ—è¡¨ -->
      <block wx:else>
        <view wx:if="{{items.length === 0}}" class="empty-container">
          <text class="empty-text">æš‚æ— å•†å“ä¿¡æ¯</text>
        </view>
        <view wx:else class="items-list">
          <view 
            wx:for="{{items}}" 
            wx:key="id"
            wx:for-item="item"
            class="item-card"
            bindtap="viewItem"
            data-item="{{item}}"
          >
            <image 
              class="item-image" 
              src="{{item.image}}" 
              mode="aspectFill"
              binderror="onImageError"
              data-index="{{index}}"
            ></image>
            <view class="item-content">
              <view class="item-header">
                <view class="item-title">{{item.title}}</view>
                <view class="item-price">{{item.price}} EGP</view>
              </view>
              <view wx:if="{{item.category}}" class="item-category">{{item.category}}</view>
              <view wx:if="{{item.description}}" class="item-description">{{item.description}}</view>
              <view class="item-footer">
                <view class="item-contact" bindtap="copyContact" data-contact="{{item.contact}}" catchtap="true">
                  <text class="contact-icon">ğŸ“</text>
                  <text class="contact-text">{{item.contact}}</text>
                </view>
              </view>
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>
</view>

