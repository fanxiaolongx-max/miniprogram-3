<view class="page" data-weui-theme="light">
  <view class="container">
    <view class="translation-section">
      <!-- 分类筛选 -->
      <view class="category-filter">
        <view 
          wx:for="{{categories}}" 
          wx:key="*this"
          class="category-item {{selectedCategory === item ? 'active' : ''}}"
          bindtap="selectCategory"
          data-category="{{item}}"
        >
          {{item === 'all' ? '全部' : item}}
        </view>
      </view>

      <!-- 加载状态 -->
      <view wx:if="{{loading}}" class="loading-container">
        <text class="loading-text">加载中...</text>
      </view>

      <!-- 错误状态 -->
      <view wx:elif="{{error}}" class="error-container">
        <text class="error-text">获取数据失败，请稍后重试</text>
        <button class="retry-btn" bindtap="retry">重试</button>
      </view>

      <!-- 大色块矩阵布局 -->
      <block wx:else>
        <view wx:if="{{phrases.length === 0}}" class="empty-container">
          <text class="empty-text">暂无翻译数据</text>
        </view>
        <view wx:else class="phrase-grid">
          <view 
            wx:for="{{phrases}}" 
            wx:key="id"
            wx:for-item="phrase"
            class="phrase-button {{selectedCategory !== 'all' && phrase.category !== selectedCategory ? 'hidden' : ''}}"
            bindtap="showPhrase"
            data-phrase="{{phrase}}"
          >
            <view class="phrase-button-text">{{phrase.chinese}}</view>
            <view class="phrase-button-category">{{phrase.category}}</view>
          </view>
        </view>
      </block>
    </view>

    <!-- 全屏显示弹窗 -->
    <view wx:if="{{showModal}}" class="phrase-modal" bindtap="hidePhrase">
      <view class="modal-content" catchtap="true">
        <view class="modal-header">
          <text class="modal-title">{{currentPhrase.chinese}}</text>
          <text class="modal-close" bindtap="hidePhrase">✕</text>
        </view>
        <view class="modal-body">
          <view class="modal-arabic">{{currentPhrase.arabic}}</view>
          <view class="modal-actions">
            <button class="action-btn" bindtap="copyArabic" data-text="{{currentPhrase.arabic}}">复制阿语</button>
            <button class="action-btn" bindtap="copyChinese" data-text="{{currentPhrase.chinese}}">复制中文</button>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>

