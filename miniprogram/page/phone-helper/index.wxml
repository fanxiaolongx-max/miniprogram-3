<view class="page" data-weui-theme="{{theme}}">
  <view class="container">
    <view class="phone-helper-section">
      <view class="section-title">📱 话费助手</view>
      <view class="section-desc">点击代码可复制，长按可拨打</view>

      <!-- 加载状态 -->
      <view wx:if="{{loading}}" class="loading-container">
        <text class="loading-text">加载中...</text>
      </view>

      <!-- 错误状态 -->
      <view wx:elif="{{error}}" class="error-container">
        <text class="error-text">获取数据失败，请稍后重试</text>
        <button class="retry-btn" bindtap="retry">重试</button>
      </view>

      <!-- 运营商代码列表 -->
      <block wx:else>
        <view wx:if="{{codes.length === 0}}" class="empty-container">
          <text class="empty-text">暂无数据</text>
        </view>
        <view wx:else class="codes-list">
          <view 
            wx:for="{{codes}}" 
            wx:key="id"
            wx:for-item="code"
            class="code-card"
          >
            <view class="code-header">
              <view class="operator-name">{{code.operator}}</view>
            </view>
            
            <view class="code-content">
              <view class="code-item">
                <view class="code-label">查余额</view>
                <view 
                  class="code-value" 
                  bindtap="copyCode" 
                  bindlongpress="callCode"
                  data-code="{{code.balanceCode}}"
                >
                  {{code.balanceCode}}
                </view>
                <text class="code-hint">点击复制，长按拨打</text>
              </view>
              
              <view class="code-divider"></view>
              
              <view class="code-item">
                <view class="code-label">充值</view>
                <view 
                  class="code-value" 
                  bindtap="copyCode"
                  data-code="{{code.rechargeCode}}"
                >
                  {{code.rechargeCode}}
                </view>
                <text class="code-hint">点击复制</text>
              </view>
              
              <view wx:if="{{code.description}}" class="code-description">
                {{code.description}}
              </view>
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>
</view>

