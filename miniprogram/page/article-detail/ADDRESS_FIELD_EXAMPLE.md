# 文章详情页地址字段示例

## 概述

文章详情页支持在 JSON 返回数据中包含地址信息，系统会自动解析并在地图组件中显示位置，用户点击地图可以调用本机的导航应用（如谷歌地图、苹果地图等）。

## 支持的地址字段格式

系统支持多种字段名，以提高兼容性：

### 必需字段（至少需要经纬度）

- **latitude** 或 **lat**: 纬度（数字，必填）
- **longitude** 或 **lng** 或 **lon**: 经度（数字，必填）

### 可选字段

- **name** 或 **title**: 地点名称（字符串，可选）
- **address** 或 **location**: 地址描述（字符串，可选）

## JSON 返回格式示例

### 示例 1: 基本格式（对象格式）

```json
{
  "content": "<p>文章内容...</p>",
  "title": "开罗国际机场",
  "meta": "2024-01-01",
  "latitude": 30.0444,
  "longitude": 31.2357,
  "address": "开罗市中心，Heliopolis 区",
  "name": "开罗国际机场"
}
```

### 示例 2: 嵌套格式（data 对象）

```json
{
  "data": {
    "content": "<p>文章内容...</p>",
    "title": "City Stars 购物中心",
    "meta": "2024-01-01",
    "latitude": 30.0626,
    "longitude": 31.3197,
    "address": "开罗市中心，Nasr City 区",
    "name": "City Stars 购物中心"
  }
}
```

### 示例 3: 数组格式（取第一个元素）

```json
[
  {
    "content": "<p>文章内容...</p>",
    "title": "金字塔",
    "meta": "2024-01-01",
    "lat": 29.9792,
    "lng": 31.1342,
    "location": "开罗吉萨省",
    "name": "吉萨金字塔群"
  }
]
```

### 示例 4: 使用不同字段名

```json
{
  "content": "<p>文章内容...</p>",
  "title": "尼罗河游船",
  "meta": "2024-01-01",
  "lat": 30.0444,
  "lon": 31.2357,
  "address": "开罗尼罗河畔"
}
```

## 字段说明

### latitude / lat
- **类型**: 数字
- **必填**: 是（与 longitude 一起）
- **说明**: 地点的纬度坐标
- **示例**: `30.0444`

### longitude / lng / lon
- **类型**: 数字
- **必填**: 是（与 latitude 一起）
- **说明**: 地点的经度坐标
- **示例**: `31.2357`

### name / title
- **类型**: 字符串
- **必填**: 否
- **说明**: 地点名称，如果未提供，将使用文章标题或默认值"位置"
- **示例**: `"开罗国际机场"`

### address / location
- **类型**: 字符串
- **必填**: 否
- **说明**: 地址描述文本，用于在地图上显示
- **示例**: `"开罗市中心，Heliopolis 区"`

## 功能说明

1. **自动解析**: 系统会自动从 JSON 返回数据中提取地址信息
2. **地图显示**: 如果检测到有效的经纬度，会在文章下方显示地图组件
3. **导航功能**: 用户点击地图可以调用本机的导航应用（如谷歌地图、苹果地图、百度地图等）
4. **位置标记**: 地图会自动标记文章中的位置，并显示地点名称和地址

## 注意事项

1. **经纬度格式**: 必须是有效的数字，不能是字符串
2. **坐标系统**: 使用 WGS84 坐标系（GPS 标准坐标）
3. **可选字段**: name 和 address 是可选的，但建议提供以提升用户体验
4. **字段优先级**: 
   - latitude > lat
   - longitude > lng > lon
   - name > title
   - address > location

## 测试示例

### 完整示例

```json
{
  "content": "<h1>开罗国际机场指南</h1><p>这里是详细的机场指南内容...</p>",
  "title": "开罗国际机场",
  "meta": "2024-01-15",
  "latitude": 30.0444,
  "longitude": 31.2357,
  "name": "开罗国际机场",
  "address": "开罗市中心，Heliopolis 区，机场路"
}
```

### 最小示例（仅经纬度）

```json
{
  "content": "<p>文章内容...</p>",
  "title": "某个地点",
  "latitude": 30.0444,
  "longitude": 31.2357
}
```

## 地图功能

- **地图高度**: 300px
- **缩放级别**: 16（适中级别，可看到周边环境）
- **标记点**: 自动在地图上标记位置
- **点击交互**: 点击地图任意位置可打开导航应用
- **显示位置**: 地图会显示用户当前位置（如果已授权）
