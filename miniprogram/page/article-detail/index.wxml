<view class="page" data-weui-theme="{{theme}}">
  <view class="container">
    <!-- 加载状态 -->
    <view wx:if="{{loading}}" class="loading-container">
      <text class="loading-text">加载中...</text>
    </view>

    <!-- 错误状态 -->
    <view wx:elif="{{error}}" class="error-container">
      <text class="error-text">获取内容失败，请稍后重试</text>
      <button class="retry-btn" bindtap="retry">重试</button>
    </view>

    <!-- 内容展示 -->
    <view wx:else class="article-container">
      <view wx:if="{{title}}" class="article-title">{{title}}</view>
      <view wx:if="{{meta}}" class="article-meta">{{meta}}</view>
      <rich-text class="article-content" nodes="{{content}}" selectable="{{true}}"></rich-text>
      
      <!-- 文章地址地图区域 -->
      <view wx:if="{{location}}" class="location-section">
        <view class="location-title">位置信息</view>
        <view class="location-info">
          <view wx:if="{{location.name}}" class="location-name">{{location.name}}</view>
          <view wx:if="{{location.address}}" class="location-address">{{location.address}}</view>
        </view>
        <map
          class="location-map"
          longitude="{{location.longitude}}"
          latitude="{{location.latitude}}"
          scale="16"
          markers="{{mapMarkers}}"
          bindtap="openLocation"
          show-location="{{true}}"
        ></map>
        <view class="location-tip">点击地图打开导航</view>
      </view>
      
      <!-- 文章图片区域（支持长按保存） -->
      <view wx:if="{{images.length > 0}}" class="images-section">
        <view class="images-title">文章图片</view>
        <view class="images-container">
          <image 
            wx:for="{{images}}" 
            wx:key="*this"
            class="article-image"
            src="{{item}}"
            mode="widthFix"
            bindlongpress="saveImage"
            data-url="{{item}}"
            show-menu-by-longpress="{{true}}"
          ></image>
        </view>
      </view>
      
      <!-- 文章链接区域 -->
      <view wx:if="{{links.length > 0}}" class="links-section">
        <view class="links-title">文章链接</view>
        <view class="links-container">
          <view 
            wx:for="{{links}}" 
            wx:key="url" 
            class="link-item"
            bindtap="copyLink"
            data-url="{{item.url}}"
          >
            <view class="link-icon">🔗</view>
            <view class="link-content">
              <view class="link-text">{{item.text}}</view>
              <view class="link-url">{{item.url}}</view>
            </view>
            <view class="link-action">复制</view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
